<?xml version="1.0" encoding="UTF-8"?>
<!--
  screen_main.xml
  Main screen with Tabview for ESP32 Media Tracker
  Target: 320x240 landscape TFT
-->
<screen xmlns="http://lvgl.io/xml/ui/1.0" id="main">

  <!-- Root container fills the screen with dark background -->
  <obj id="screen_root" style="dark_screen" width="320" height="240">

    <!-- Tabview: full screen, tabs at top -->
    <tabview id="main_tabview" style="tabview_bg"
             width="320" height="240"
             tab_bar_position="TOP"
             tab_bar_size="35">

      <!-- ==================== MUSIC TAB ==================== -->
      <tab id="music_tab" name="Music">
        <obj id="music_root" style="dark_screen" width="100%" height="100%"
             layout="FLEX" flex_flow="COLUMN" flex_align_main="START"
             pad_all="2" pad_row="4">

          <!-- Music Header Card: artwork + track info -->
          <obj id="music_header_card" style="dark_card"
               width="100%" height="130"
               layout="FLEX" flex_flow="ROW" flex_align_main="START"
               pad_all="6" pad_column="8">

            <!-- Artwork placeholder (square) -->
            <obj id="music_artwork" style="artwork_placeholder"
                 width="80" height="80">
              <label id="music_artwork_icon" style="label_secondary"
                     text="&#xF001;" align="CENTER"/>
              <!-- &#xF001; is music note in FontAwesome, fallback to LV_SYMBOL_AUDIO -->
            </obj>

            <!-- Track info column -->
            <obj id="music_info_col" width="200" height="80"
                 layout="FLEX" flex_flow="COLUMN" flex_align_main="START"
                 pad_all="0" pad_row="2">

              <label id="music_title_label" style="label_primary"
                     text="No media playing"
                     width="195"
                     long_mode="SCROLL_CIRCULAR"/>

              <label id="music_artist_label" style="label_secondary"
                     text="Artist"
                     width="195"/>

              <label id="music_album_label" style="label_secondary"
                     text="Album"
                     width="195"/>
            </obj>
          </obj>

          <!-- Music Progress Card: bar + time -->
          <obj id="music_progress_card" style="dark_card"
               width="100%" height="50"
               layout="FLEX" flex_flow="COLUMN" flex_align_main="CENTER"
               pad_all="6" pad_row="4">

            <!-- Progress bar -->
            <bar id="music_progress_bar" style="progress_bar_bg"
                 width="290" height="10"
                 range_min="0" range_max="100" value="0">
              <style_indicator style="progress_bar_indicator"/>
            </bar>

            <!-- Time label: "0:00 / 3:45" -->
            <label id="music_time_label" style="label_secondary"
                   text="0:00 / 0:00"
                   align="CENTER"/>
          </obj>

        </obj>
      </tab>

      <!-- ==================== TASKS TAB ==================== -->
      <tab id="tasks_tab" name="Tasks">
        <obj id="task_root" style="dark_screen" width="100%" height="100%"
             layout="FLEX" flex_flow="ROW" flex_align_main="START"
             pad_all="2" pad_column="4">

          <!-- Left Card: CPU/MEM/GPU arcs -->
          <obj id="task_meter_card" style="dark_card"
               width="125" height="185"
               layout="FLEX" flex_flow="COLUMN" flex_align_main="START"
               pad_all="4" pad_row="2">

            <!-- Arc container (stacked arcs) -->
            <obj id="arc_container" width="110" height="95"
                 pad_all="0">

              <!-- CPU Arc (outermost) -->
              <arc id="task_cpu_arc" style="arc_bg"
                   width="90" height="90" align="TOP_MID"
                   rotation="135" bg_start_angle="0" bg_end_angle="270"
                   range_min="0" range_max="100" value="0"
                   mode="NORMAL">
                <style_indicator style="arc_cyan"/>
              </arc>

              <!-- MEM Arc (middle) -->
              <arc id="task_mem_arc" style="arc_bg"
                   width="70" height="70" align="TOP_MID" y="10"
                   rotation="135" bg_start_angle="0" bg_end_angle="270"
                   range_min="0" range_max="100" value="0"
                   mode="NORMAL">
                <style_indicator style="arc_orange"/>
              </arc>

              <!-- GPU Arc (innermost) -->
              <arc id="task_gpu_arc" style="arc_bg"
                   width="50" height="50" align="TOP_MID" y="20"
                   rotation="135" bg_start_angle="0" bg_end_angle="270"
                   range_min="0" range_max="100" value="0"
                   mode="NORMAL">
                <style_indicator style="arc_green"/>
              </arc>
            </obj>

            <!-- Labels below arcs -->
            <label id="task_cpu_label" style="label_cyan"
                   text="CPU: 0%"/>
            <label id="task_mem_label" style="label_orange"
                   text="MEM: 0%"/>
            <label id="task_gpu_label" style="label_green"
                   text="GPU: 0%"/>
          </obj>

          <!-- Right Card: Process list -->
          <obj id="task_list_card" style="dark_card"
               width="180" height="185"
               layout="FLEX" flex_flow="COLUMN" flex_align_main="START"
               pad_all="4" pad_row="2">

            <!-- Title -->
            <label id="task_list_title" style="label_secondary"
                   text="Top Processes" align="TOP_MID"/>

            <!-- Process list -->
            <list id="task_proc_list" style="list_bg"
                  width="168" height="150">
              <!-- Process rows will be added dynamically in C++ -->
              <!-- Each row: button with LV_SYMBOL_CLOSE + process text -->
            </list>
          </obj>

        </obj>
      </tab>

      <!-- ==================== DISCORD TAB ==================== -->
      <tab id="discord_tab" name="Discord">
        <obj id="discord_root" style="dark_screen" width="100%" height="100%"
             layout="FLEX" flex_flow="COLUMN" flex_align_main="CENTER"
             flex_align_cross="CENTER" pad_all="4">

          <obj id="discord_card" style="dark_card"
               width="300" height="160"
               layout="FLEX" flex_flow="COLUMN" flex_align_main="CENTER"
               flex_align_cross="CENTER" pad_all="16">

            <label id="discord_title" style="label_primary"
                   text="Discord" align="CENTER"/>

            <label id="discord_status" style="label_secondary"
                   text="Coming soon..." align="CENTER"/>
          </obj>

        </obj>
      </tab>

      <!-- ==================== SETTINGS TAB ==================== -->
      <tab id="settings_tab" name="Settings">
        <obj id="settings_root" style="dark_screen" width="100%" height="100%"
             layout="FLEX" flex_flow="COLUMN" flex_align_main="START"
             pad_all="4" pad_row="4">

          <obj id="settings_card" style="dark_card"
               width="300" height="160"
               layout="FLEX" flex_flow="COLUMN" flex_align_main="START"
               pad_all="12" pad_row="8">

            <label id="settings_title" style="label_primary"
                   text="Settings"/>

            <label id="settings_desc" style="label_secondary"
                   text="Theme, brightness,\nupdate interval..."/>

            <!-- Placeholder for future settings controls -->
            <obj id="settings_placeholder" width="100%" height="60"
                 pad_all="4">
              <label style="label_secondary" text="More options coming soon"
                     align="CENTER"/>
            </obj>
          </obj>

        </obj>
      </tab>

    </tabview>

  </obj>

</screen>
